/*! For license information please see main.8781f1f4964307464517.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateitsforgotham("main",{"./app/components/Canvas/Home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s("./node_modules/ogl/src/core/Transform.js"),l=s("./node_modules/ogl/src/extras/Plane.js"),o=s("./node_modules/gsap/index.js"),r=s("./node_modules/lodash/map.js"),h=s.n(r),n=s("./node_modules/prefix/index.js"),c=s.n(n),a=s("./app/components/Canvas/Home/menu/ImageEl.js");class d{constructor({gl:e,scene:t,screen:s,viewport:l,camera:o}){this.gl=e,this.scene=t,this.screen=s,this.viewport=l,this.camera=o,this.group=new i.Transform,this.scroll={current:0,target:0,last:0,speed:.1,ease:.05},this.t_prefix=c()("transform"),this.createGeometry(),this.getElements(),this.createMenu(),this.createMenuSelector(),this.onResize(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geo=new l.Plane(this.gl,{heightSegments:10,widthSegments:10})}getElements(){this.gallery_element=document.querySelector(".home__gallery"),this.gallery_wrapper=document.querySelector(".home__gallery__wrapper"),this.selector_videos=document.querySelector(".selectors__videos"),this.selector_photos=document.querySelector(".selectors__photos"),this.img_el=document.querySelectorAll("img.home__gallery__image__media__image"),this.vid_el=document.querySelectorAll("img.home__gallery__video__media__image"),this.img_length=this.img_el.length,this.vid_length=this.vid_el.length}createMenu(){this.image_elements=h()(this.img_el,((e,t)=>new a.default({element:e,index:t,geometry:this.geo,gl:this.gl,length:this.img_length,scene:this.group,screen:this.screen,viewport:this.viewport}))),this.video_elements=h()(this.vid_el,((e,t)=>new a.default({element:e,index:t,geometry:this.geo,gl:this.gl,length:this.vid_length,scene:this.group,screen:this.screen,viewport:this.viewport})))}createMenuSelector(){this.selector_videos.setAttribute("class","selectors__videos--active"),this.selector_photos.addEventListener("click",(()=>{const e=o.default.timeline();this.vid_el.forEach(((t,s)=>{e.fromTo(t,{scaleY:1},{scaleY:0,duration:1,delay:.1*s},0)})),e.to(this.scroll,{target:-this.scroll.limit,duration:.5},0),this.img_el.forEach(((t,s)=>{e.fromTo(t,{scaleY:0},{scaleY:1,duration:1,delay:.1*s},0)})),this.selector_videos.setAttribute("class","selectors__videos"),this.selector_photos.setAttribute("class","selectors__photos--active")})),this.selector_videos.addEventListener("click",(()=>{const e=o.default.timeline();e.to(this.scroll,{target:0,duration:.5}),this.vid_el.forEach(((t,s)=>{e.fromTo(t,{scaleY:0},{scaleY:1,duration:1,delay:.1*s},0)})),this.selector_photos.setAttribute("class","selectors__photos"),this.selector_videos.setAttribute("class","selectors__videos--active")}))}show(){h()(this.image_elements,(e=>e.show())),h()(this.video_elements,(e=>e.show()))}hide(){h()(this.image_elements,(e=>e.hide())),h()(this.video_elements,(e=>e.hide()))}onResize(){this.bounds=this.gallery_wrapper.getBoundingClientRect(),h()(this.image_elements,(e=>e.onResize({screen:this.screen,viewport:this.viewport}))),h()(this.video_elements,(e=>e.onResize({screen:this.screen,viewport:this.viewport}))),this.scroll.limit=this.bounds.width-this.image_elements[0].element.clientWidth}onTouchDown({y:e,x:t}){this.scroll.position=this.scroll.current}onTouchMove({y:e,x:t}){const s=t.start-t.end;this.scroll.target=this.scroll.position-s}onTouchUp({y:e,x:t}){}onWheel({pixelY:e,pixelX:t}){this.scroll.target-=.5*t}update(){this.scroll.target=o.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=o.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.ease),this.gallery_element.style[this.t_prefix]=`translateX(${this.scroll.current}px)`,h()(this.image_elements,(e=>e.update(this.scroll))),h()(this.video_elements,(e=>e.update(this.scroll))),this.scroll.last=this.scroll.current}destroy(){this.scene.removeChild(this.group)}}}},(function(e){e.h=()=>"e0ca6ec74d8ed4a395ff"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RWYsTUFBTUcsRUFBU0gsRUFBRUksTUFBUUosRUFBRUssSUFFM0JsRSxLQUFLRyxPQUFPRSxPQUFTTCxLQUFLRyxPQUFPMkQsU0FBV0UsQ0FDOUMsQ0FFQUcsV0FBVSxFQUFFUCxFQUFDLEVBQUVDLElBR2YsQ0FFQU8sU0FBUSxPQUFFQyxFQUFNLE9BQUVDLElBRWhCdEUsS0FBS0csT0FBT0UsUUFBbUIsR0FBVGlFLENBQ3hCLENBTUFDLFNBRUV2RSxLQUFLRyxPQUFPRSxPQUFTdUMsRUFBQUEsUUFBQUEsTUFBQUEsT0FBa0I1QyxLQUFLRyxPQUFPaUQsTUFBTyxFQUFHcEQsS0FBS0csT0FBT0UsUUFDekVMLEtBQUtHLE9BQU9DLFFBQVV3QyxFQUFBQSxRQUFBQSxNQUFBQSxZQUF1QjVDLEtBQUtHLE9BQU9DLFFBQVNKLEtBQUtHLE9BQU9FLE9BQVFMLEtBQUtHLE9BQU9LLE1BRWxHUixLQUFLc0IsZ0JBQWdCa0QsTUFBTXhFLEtBQUtTLFVBQWEsY0FBYVQsS0FBS0csT0FBT0MsYUFFdEUrQixJQUFJbkMsS0FBS2tDLGdCQUFnQkUsR0FBV0EsRUFBUW1DLE9BQU92RSxLQUFLRyxVQUN4RGdDLElBQUluQyxLQUFLd0MsZ0JBQWdCSixHQUFXQSxFQUFRbUMsT0FBT3ZFLEtBQUtHLFVBRXhESCxLQUFLRyxPQUFPRyxLQUFPTixLQUFLRyxPQUFPQyxPQUNqQyxDQU1BcUUsVUFFRXpFLEtBQUtKLE1BQU04RSxZQUFZMUUsS0FBS0MsTUFDOUIsa0JDN1BGMEUsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2l0c2ZvcmdvdGhhbS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9Ib21lL2luZGV4LmpzIiwid2VicGFjazovL2l0c2ZvcmdvdGhhbS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhbmUsIFRyYW5zZm9ybSB9IGZyb20gJ29nbCdcbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnXG5cbmltcG9ydCBtYXAgZnJvbSAnbG9kYXNoL21hcCdcbmltcG9ydCBQcmVmaXggZnJvbSAncHJlZml4J1xuXG5pbXBvcnQgSW1hZ2VFbCBmcm9tICcuL21lbnUvSW1hZ2VFbCdcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FsbGVyeVxue1xuICBjb25zdHJ1Y3Rvcih7IGdsLCBzY2VuZSwgc2NyZWVuLCB2aWV3cG9ydCwgY2FtZXJhIH0pXG4gIHtcbiAgICB0aGlzLmdsID0gZ2xcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLnNjcmVlbiA9IHNjcmVlblxuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydFxuICAgIHRoaXMuY2FtZXJhID0gY2FtZXJhXG5cbiAgICB0aGlzLmdyb3VwID0gbmV3IFRyYW5zZm9ybSgpXG5cbiAgICB0aGlzLnNjcm9sbCA9IHtcbiAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICB0YXJnZXQ6IDAsXG4gICAgICBsYXN0OiAwLFxuICAgICAgc3BlZWQ6IDAuMSxcbiAgICAgIGVhc2U6IDAuMDVcbiAgICB9XG5cbiAgICB0aGlzLnRfcHJlZml4ID0gUHJlZml4KCd0cmFuc2Zvcm0nKVxuXG4gICAgdGhpcy5jcmVhdGVHZW9tZXRyeSgpXG4gICAgdGhpcy5nZXRFbGVtZW50cygpXG4gICAgdGhpcy5jcmVhdGVNZW51KClcbiAgICB0aGlzLmNyZWF0ZU1lbnVTZWxlY3RvcigpXG5cbiAgICB0aGlzLm9uUmVzaXplKClcblxuICAgIHRoaXMuZ3JvdXAuc2V0UGFyZW50KHRoaXMuc2NlbmUpXG5cbiAgICB0aGlzLnNob3coKVxuICB9XG5cbiAgY3JlYXRlR2VvbWV0cnkoKVxuICB7XG4gICAgdGhpcy5nZW8gPSBuZXcgUGxhbmUodGhpcy5nbCxcbiAgICB7XG4gICAgICBoZWlnaHRTZWdtZW50czogMTAsXG4gICAgICB3aWR0aFNlZ21lbnRzOiAxMFxuICAgIH0pXG4gIH1cblxuICBnZXRFbGVtZW50cygpXG4gIHtcbiAgICB0aGlzLmdhbGxlcnlfZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19nYWxsZXJ5JylcbiAgICB0aGlzLmdhbGxlcnlfd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob21lX19nYWxsZXJ5X193cmFwcGVyJylcblxuICAgIHRoaXMuc2VsZWN0b3JfdmlkZW9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdG9yc19fdmlkZW9zJylcbiAgICB0aGlzLnNlbGVjdG9yX3Bob3RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RvcnNfX3Bob3RvcycpXG5cbiAgICB0aGlzLmltZ19lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5ob21lX19nYWxsZXJ5X19pbWFnZV9fbWVkaWFfX2ltYWdlJylcbiAgICB0aGlzLnZpZF9lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5ob21lX19nYWxsZXJ5X192aWRlb19fbWVkaWFfX2ltYWdlJylcblxuICAgIHRoaXMuaW1nX2xlbmd0aCA9IHRoaXMuaW1nX2VsLmxlbmd0aFxuICAgIHRoaXMudmlkX2xlbmd0aCA9IHRoaXMudmlkX2VsLmxlbmd0aFxuICB9XG5cbiAgY3JlYXRlTWVudSgpXG4gIHtcbiAgICB0aGlzLmltYWdlX2VsZW1lbnRzID0gbWFwKHRoaXMuaW1nX2VsLCAoZWxlbWVudCwgaW5kZXgpID0+XG4gICAge1xuICAgICAgcmV0dXJuIG5ldyBJbWFnZUVsKHtcbiAgICAgICAgZWxlbWVudCxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIGdlb21ldHJ5OiB0aGlzLmdlbyxcbiAgICAgICAgZ2w6IHRoaXMuZ2wsXG4gICAgICAgIGxlbmd0aDogdGhpcy5pbWdfbGVuZ3RoLFxuICAgICAgICBzY2VuZTogdGhpcy5ncm91cCxcbiAgICAgICAgc2NyZWVuOiB0aGlzLnNjcmVlbixcbiAgICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnRcbiAgICAgIH0pXG4gICAgfSlcblxuICAgIHRoaXMudmlkZW9fZWxlbWVudHMgPSBtYXAodGhpcy52aWRfZWwsIChlbGVtZW50LCBpbmRleCkgPT5cbiAgICB7XG4gICAgICByZXR1cm4gbmV3IEltYWdlRWwoe1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvLFxuICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgbGVuZ3RoOiB0aGlzLnZpZF9sZW5ndGgsXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxuICAgICAgICBzY3JlZW46IHRoaXMuc2NyZWVuLFxuICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlTWVudVNlbGVjdG9yKClcbiAge1xuICAgIHRoaXMuc2VsZWN0b3JfdmlkZW9zLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VsZWN0b3JzX192aWRlb3MtLWFjdGl2ZScpXG5cbiAgICB0aGlzLnNlbGVjdG9yX3Bob3Rvcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+XG4gICAge1xuICAgICAgY29uc3QgcGhvdG9fdGwgPSBnc2FwLnRpbWVsaW5lKClcblxuICAgICAgdGhpcy52aWRfZWwuZm9yRWFjaCgoaW1hZ2UsIGluZGV4KSA9PlxuICAgICAge1xuICAgICAgICBwaG90b190bC5mcm9tVG8oaW1hZ2UsXG4gICAgICAgIHtcbiAgICAgICAgICBzY2FsZVk6IDEsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzY2FsZVk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgZGVsYXk6IGluZGV4ICogMC4xXG4gICAgICAgIH0sIDApXG4gICAgICB9KVxuXG4gICAgICBwaG90b190bC50byh0aGlzLnNjcm9sbCxcbiAgICAgIHtcbiAgICAgICAgdGFyZ2V0OiAtdGhpcy5zY3JvbGwubGltaXQsXG4gICAgICAgIGR1cmF0aW9uOiAwLjUsXG4gICAgICB9LCAwKVxuXG4gICAgICB0aGlzLmltZ19lbC5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+XG4gICAgICB7XG4gICAgICAgIHBob3RvX3RsLmZyb21UbyhpbWFnZSxcbiAgICAgICAge1xuICAgICAgICAgIHNjYWxlWTogMCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHNjYWxlWTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICBkZWxheTogaW5kZXggKiAwLjFcbiAgICAgICAgfSwgMClcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMuc2VsZWN0b3JfdmlkZW9zLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VsZWN0b3JzX192aWRlb3MnKVxuICAgICAgdGhpcy5zZWxlY3Rvcl9waG90b3Muc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RvcnNfX3Bob3Rvcy0tYWN0aXZlJylcbiAgICB9KVxuXG4gICAgdGhpcy5zZWxlY3Rvcl92aWRlb3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgIHtcbiAgICAgIGNvbnN0IHZpZF90bCA9IGdzYXAudGltZWxpbmUoKVxuXG4gICAgICB2aWRfdGwudG8odGhpcy5zY3JvbGwsXG4gICAgICAgIHtcbiAgICAgICAgICB0YXJnZXQ6IDAsXG4gICAgICAgICAgZHVyYXRpb246IDAuNSxcbiAgICAgICAgfSlcblxuXG4gICAgICB0aGlzLnZpZF9lbC5mb3JFYWNoKChpbWFnZSwgaW5kZXgpID0+XG4gICAgICB7XG4gICAgICAgIHZpZF90bC5mcm9tVG8oaW1hZ2UsXG4gICAgICAgIHtcbiAgICAgICAgICBzY2FsZVk6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBzY2FsZVk6IDEsXG4gICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgZGVsYXk6IGluZGV4ICogMC4xXG4gICAgICAgIH0sIDApXG4gICAgICB9KVxuXG4gICAgICB0aGlzLnNlbGVjdG9yX3Bob3Rvcy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NlbGVjdG9yc19fcGhvdG9zJylcbiAgICAgIHRoaXMuc2VsZWN0b3JfdmlkZW9zLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VsZWN0b3JzX192aWRlb3MtLWFjdGl2ZScpXG4gICAgfSlcbiAgfVxuXG4gIC8qXG4gICAgQW5pbWF0aW9ucy5cbiAgKi9cblxuICBzaG93KClcbiAge1xuICAgIG1hcCh0aGlzLmltYWdlX2VsZW1lbnRzLCBlbGVtZW50ID0+IGVsZW1lbnQuc2hvdygpKVxuICAgIG1hcCh0aGlzLnZpZGVvX2VsZW1lbnRzLCBlbGVtZW50ID0+IGVsZW1lbnQuc2hvdygpKVxuICB9XG5cbiAgaGlkZSgpXG4gIHtcbiAgICBtYXAodGhpcy5pbWFnZV9lbGVtZW50cywgZWxlbWVudCA9PiBlbGVtZW50LmhpZGUoKSlcbiAgICBtYXAodGhpcy52aWRlb19lbGVtZW50cywgZWxlbWVudCA9PiBlbGVtZW50LmhpZGUoKSlcbiAgfVxuXG4gIC8qXG4gICAgRXZlbnRzLlxuICAqL1xuXG4gIG9uUmVzaXplKClcbiAge1xuICAgIHRoaXMuYm91bmRzID0gdGhpcy5nYWxsZXJ5X3dyYXBwZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcblxuICAgIG1hcCh0aGlzLmltYWdlX2VsZW1lbnRzLCBlbGVtZW50ID0+IGVsZW1lbnQub25SZXNpemUoe1xuICAgICAgc2NyZWVuOiB0aGlzLnNjcmVlbixcbiAgICAgIHZpZXdwb3J0OiB0aGlzLnZpZXdwb3J0LFxuICAgIH0pKVxuXG4gICAgbWFwKHRoaXMudmlkZW9fZWxlbWVudHMsIGVsZW1lbnQgPT4gZWxlbWVudC5vblJlc2l6ZSh7XG4gICAgICBzY3JlZW46IHRoaXMuc2NyZWVuLFxuICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnQsXG4gICAgfSkpXG5cbiAgICB0aGlzLnNjcm9sbC5saW1pdCA9IHRoaXMuYm91bmRzLndpZHRoIC0gdGhpcy5pbWFnZV9lbGVtZW50c1swXS5lbGVtZW50LmNsaWVudFdpZHRoXG4gIH1cblxuICBvblRvdWNoRG93bih7IHksIHggfSlcbiAge1xuICAgIHRoaXMuc2Nyb2xsLnBvc2l0aW9uID0gdGhpcy5zY3JvbGwuY3VycmVudFxuICB9XG5cbiAgb25Ub3VjaE1vdmUoeyB5LCB4IH0pXG4gIHtcbiAgICBjb25zdCB4X2Rpc3QgPSB4LnN0YXJ0IC0geC5lbmRcblxuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCA9IHRoaXMuc2Nyb2xsLnBvc2l0aW9uIC0geF9kaXN0XG4gIH1cblxuICBvblRvdWNoVXAoeyB5LCB4IH0pXG4gIHtcblxuICB9XG5cbiAgb25XaGVlbCh7IHBpeGVsWSwgcGl4ZWxYIH0pXG4gIHtcbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgLT0gcGl4ZWxYICogMC41XG4gIH1cblxuICAvKlxuICAgIFVwZGF0ZS5cbiAgKi9cblxuICB1cGRhdGUoKVxuICB7XG4gICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gZ3NhcC51dGlscy5jbGFtcCgtdGhpcy5zY3JvbGwubGltaXQsIDAsIHRoaXMuc2Nyb2xsLnRhcmdldClcbiAgICB0aGlzLnNjcm9sbC5jdXJyZW50ID0gZ3NhcC51dGlscy5pbnRlcnBvbGF0ZSh0aGlzLnNjcm9sbC5jdXJyZW50LCB0aGlzLnNjcm9sbC50YXJnZXQsIHRoaXMuc2Nyb2xsLmVhc2UpXG5cbiAgICB0aGlzLmdhbGxlcnlfZWxlbWVudC5zdHlsZVt0aGlzLnRfcHJlZml4XSA9IGB0cmFuc2xhdGVYKCR7dGhpcy5zY3JvbGwuY3VycmVudH1weClgXG5cbiAgICBtYXAodGhpcy5pbWFnZV9lbGVtZW50cywgZWxlbWVudCA9PiBlbGVtZW50LnVwZGF0ZSh0aGlzLnNjcm9sbCkpXG4gICAgbWFwKHRoaXMudmlkZW9fZWxlbWVudHMsIGVsZW1lbnQgPT4gZWxlbWVudC51cGRhdGUodGhpcy5zY3JvbGwpKVxuXG4gICAgdGhpcy5zY3JvbGwubGFzdCA9IHRoaXMuc2Nyb2xsLmN1cnJlbnRcbiAgfVxuXG4gIC8qXG4gICAgRGVzdHJveS5cbiAgKi9cblxuICBkZXN0cm95KClcbiAge1xuICAgIHRoaXMuc2NlbmUucmVtb3ZlQ2hpbGQodGhpcy5ncm91cClcbiAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiZTBjYTZlYzc0ZDhlZDRhMzk1ZmZcIikiXSwibmFtZXMiOlsiR2FsbGVyeSIsImNvbnN0cnVjdG9yIiwiZ2wiLCJzY2VuZSIsInNjcmVlbiIsInZpZXdwb3J0IiwiY2FtZXJhIiwidGhpcyIsImdyb3VwIiwiVHJhbnNmb3JtIiwic2Nyb2xsIiwiY3VycmVudCIsInRhcmdldCIsImxhc3QiLCJzcGVlZCIsImVhc2UiLCJ0X3ByZWZpeCIsIlByZWZpeCIsImNyZWF0ZUdlb21ldHJ5IiwiZ2V0RWxlbWVudHMiLCJjcmVhdGVNZW51IiwiY3JlYXRlTWVudVNlbGVjdG9yIiwib25SZXNpemUiLCJzZXRQYXJlbnQiLCJzaG93IiwiZ2VvIiwiUGxhbmUiLCJoZWlnaHRTZWdtZW50cyIsIndpZHRoU2VnbWVudHMiLCJnYWxsZXJ5X2VsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJnYWxsZXJ5X3dyYXBwZXIiLCJzZWxlY3Rvcl92aWRlb3MiLCJzZWxlY3Rvcl9waG90b3MiLCJpbWdfZWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwidmlkX2VsIiwiaW1nX2xlbmd0aCIsImxlbmd0aCIsInZpZF9sZW5ndGgiLCJpbWFnZV9lbGVtZW50cyIsIm1hcCIsImVsZW1lbnQiLCJpbmRleCIsIkltYWdlRWwiLCJnZW9tZXRyeSIsInZpZGVvX2VsZW1lbnRzIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBob3RvX3RsIiwiZ3NhcCIsImZvckVhY2giLCJpbWFnZSIsImZyb21UbyIsInNjYWxlWSIsImR1cmF0aW9uIiwiZGVsYXkiLCJ0byIsImxpbWl0IiwidmlkX3RsIiwiaGlkZSIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiY2xpZW50V2lkdGgiLCJvblRvdWNoRG93biIsInkiLCJ4IiwicG9zaXRpb24iLCJvblRvdWNoTW92ZSIsInhfZGlzdCIsInN0YXJ0IiwiZW5kIiwib25Ub3VjaFVwIiwib25XaGVlbCIsInBpeGVsWSIsInBpeGVsWCIsInVwZGF0ZSIsInN0eWxlIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9