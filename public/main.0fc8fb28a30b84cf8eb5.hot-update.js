/*! For license information please see main.0fc8fb28a30b84cf8eb5.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateitsforgotham("main",{"./app/components/Canvas/Home/menu/MenuElement.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var i=s("./node_modules/ogl/src/core/Texture.js"),h=s("./node_modules/ogl/src/core/Program.js"),a=s("./node_modules/ogl/src/core/Mesh.js"),n=s("./node_modules/gsap/index.js"),o=s("./app/shaders/home/element/vertex.glsl"),r=s("./app/shaders/home/element/fragment.glsl"),l=s("./app/components/Canvas/Home/menu/Title.js");class p{constructor({element:e,index:t,text:s,geometry:i,gl:h,length:a,scene:n,screen:o,viewport:r}){this.element=e,this.index=t,this.text=s,this.geo=i,this.gl=h,this.length=a,this.scene=n,this.screen=o,this.viewport=r,this.new_pos=0,this.createMesh(),this.createBounds()}createMesh(){const e=new Image,t=new i.Texture(this.gl,{generateMipmaps:!1});this.program=new h.Program(this.gl,{vertex:o.default,fragment:r.default,uniforms:{tMap:{value:t},u_imageSize:{value:[0,0]},u_planeSize:{value:[0,0]},u_alpha:{value:0},u_offset:{value:0},u_strength:{value:0},u_viewportSize:{value:[this.viewport.width,this.viewport.height]}}}),e.crossOrigin="anonymous",e.src=this.element.getAttribute("data-src"),e.onload=()=>{this.program.uniforms.u_imageSize.value=[e.naturalWidth,e.naturalHeight],t.image=e},this.plane=new a.Mesh(this.gl,{geometry:this.geo,program:this.program}),this.plane.setParent(this.scene)}createTitle(){this.title=new l.default({gl:this.gl,plane:this.plane,renderer:this.renderer,text:this.text})}createBounds(){this.bounds=this.element.getBoundingClientRect(),this.wrap=document.querySelector(".home__gallery__wrapper"),this.wrap_bounds=this.wrap.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY(),this.plane.program.uniforms.u_planeSize.value=[this.plane.scale.x,this.plane.scale.y],this.full_width=this.wrap_bounds.width/this.screen.width*this.viewport.width}show(){n.default.fromTo(this.program.uniforms.u_alpha,{value:0,duration:1},{value:1,duration:1})}hide(){n.default.to(this.program.uniforms.u_alpha,{value:0,duration:1})}onResize(e){if(this.new_pos=0,e){const{screen:t,viewport:s}=e;t&&(this.screen=t),s&&(this.viewport=s,this.plane.program.uniforms.u_viewportSize.value=[this.viewport.width,this.viewport.height])}this.createBounds()}updateScale(){this.plane.scale.x=this.viewport.width*this.bounds.width/this.screen.width,this.plane.scale.y=this.viewport.height*this.bounds.height/this.screen.height,this.plane.program.uniforms.u_planeSize.value=[this.plane.scale.x,this.plane.scale.y];const e=n.default.utils.mapRange(0,this.viewport.width/2,0,-.3,Math.abs(this.plane.position.x));this.plane.scale.x+=e,this.plane.scale.y+=e}updateX(e=0){this.x=(this.bounds.left-e)/this.screen.width;const t=this.plane.position.x-this.x/100;this.plane.program.uniforms.u_offset.value=n.default.utils.mapRange(-4,4,-.35,.35,t),this.plane.position.x=this.viewport.width/2-this.plane.scale.x/2-this.x*this.viewport.width+this.new_pos}updateY(){this.y=this.bounds.top/this.screen.height,this.plane.position.y=this.viewport.height/2-this.plane.scale.y/2-this.y*this.viewport.height,this.plane.position.y+=1.25*Math.cos(this.plane.position.x/this.viewport.width*Math.PI)-1.25}update(e,t){if(this.bounds){if(this.updateScale(),this.updateX(e.current),this.updateY(),this.plane.program.uniforms.u_strength.value=(e.current-e.last)/this.screen.width*30,"up"===t){this.plane.position.x+this.plane.scale.x<-this.viewport.width/2&&(this.new_pos+=this.full_width)}if("down"===t){this.plane.position.x-this.plane.scale.x>this.viewport.width/2&&(this.new_pos-=this.full_width)}}}}}},(function(e){e.h=()=>"60d96113488cb6a2e5f5"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QW9CQyxFQUFJLElBQU0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pdHNmb3Jnb3RoYW0vLi9hcHAvY29tcG9uZW50cy9DYW52YXMvSG9tZS9tZW51L01lbnVFbGVtZW50LmpzIiwid2VicGFjazovL2l0c2ZvcmdvdGhhbS93ZWJwYWNrL3J1bnRpbWUvZ2V0RnVsbEhhc2giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWVzaCwgUHJvZ3JhbSwgVGV4dHVyZSB9IGZyb20gJ29nbCdcbmltcG9ydCBnc2FwIGZyb20gJ2dzYXAnXG5cbmltcG9ydCB2ZXJ0ZXggZnJvbSAnc2hhZGVycy9ob21lL2VsZW1lbnQvdmVydGV4Lmdsc2wnXG5pbXBvcnQgZnJhZ21lbnQgZnJvbSAnc2hhZGVycy9ob21lL2VsZW1lbnQvZnJhZ21lbnQuZ2xzbCdcblxuaW1wb3J0IFRpdGxlIGZyb20gJy4vVGl0bGUnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1lbnVFbGVtZW50XG57XG4gIGNvbnN0cnVjdG9yKHsgZWxlbWVudCwgaW5kZXgsIHRleHQsIGdlb21ldHJ5LCBnbCwgbGVuZ3RoLCBzY2VuZSwgc2NyZWVuLCB2aWV3cG9ydCB9KVxuICB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudFxuICAgIHRoaXMuaW5kZXggPSBpbmRleFxuICAgIHRoaXMudGV4dCA9IHRleHRcbiAgICB0aGlzLmdlbyA9IGdlb21ldHJ5XG4gICAgdGhpcy5nbCA9IGdsXG4gICAgdGhpcy5sZW5ndGggPSBsZW5ndGhcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLnNjcmVlbiA9IHNjcmVlblxuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydFxuXG4gICAgdGhpcy5uZXdfcG9zID0gMFxuXG4gICAgdGhpcy5jcmVhdGVNZXNoKClcblxuICAgIHRoaXMuY3JlYXRlQm91bmRzKClcbiAgfVxuXG4gIC8qXG4gICAgQ3JlYXRlLlxuICAqL1xuXG4gIGNyZWF0ZU1lc2goKVxuICB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKVxuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmdsLCB7XG4gICAgICBnZW5lcmF0ZU1pcG1hcHM6IGZhbHNlXG4gICAgfSlcblxuICAgIHRoaXMucHJvZ3JhbSA9IG5ldyBQcm9ncmFtKHRoaXMuZ2wsXG4gICAge1xuICAgICAgdmVydGV4LFxuICAgICAgZnJhZ21lbnQsXG4gICAgICB1bmlmb3JtczpcbiAgICAgIHtcbiAgICAgICAgdE1hcDogeyB2YWx1ZTogdGV4dHVyZSB9LFxuICAgICAgICB1X2ltYWdlU2l6ZTogeyB2YWx1ZTogWzAsIDBdIH0sXG4gICAgICAgIHVfcGxhbmVTaXplOiB7IHZhbHVlOiBbMCwgMF0gfSxcbiAgICAgICAgdV9hbHBoYTogeyB2YWx1ZTogMC4wIH0sXG4gICAgICAgIHVfb2Zmc2V0OiB7IHZhbHVlOiAwIH0sXG4gICAgICAgIHVfc3RyZW5ndGg6IHsgdmFsdWU6IDAgfSxcbiAgICAgICAgdV92aWV3cG9ydFNpemU6IHsgdmFsdWU6IFt0aGlzLnZpZXdwb3J0LndpZHRoLCB0aGlzLnZpZXdwb3J0LmhlaWdodF0gfVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnXG4gICAgaW1hZ2Uuc3JjID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKVxuICAgIGltYWdlLm9ubG9hZCA9ICgpID0+XG4gICAge1xuICAgICAgdGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVfaW1hZ2VTaXplLnZhbHVlID0gW2ltYWdlLm5hdHVyYWxXaWR0aCwgaW1hZ2UubmF0dXJhbEhlaWdodF1cbiAgICAgIHRleHR1cmUuaW1hZ2UgPSBpbWFnZVxuICAgIH1cblxuICAgIHRoaXMucGxhbmUgPSBuZXcgTWVzaCh0aGlzLmdsLCB7XG4gICAgICBnZW9tZXRyeTogdGhpcy5nZW8sXG4gICAgICBwcm9ncmFtOiB0aGlzLnByb2dyYW1cbiAgICB9KVxuXG4gICAgdGhpcy5wbGFuZS5zZXRQYXJlbnQodGhpcy5zY2VuZSlcbiAgfVxuXG4gIGNyZWF0ZVRpdGxlICgpIHtcbiAgICB0aGlzLnRpdGxlID0gbmV3IFRpdGxlKHtcbiAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgcGxhbmU6IHRoaXMucGxhbmUsXG4gICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcbiAgICAgIHRleHQ6IHRoaXMudGV4dCxcbiAgICB9KVxuICB9XG5cbiAgY3JlYXRlQm91bmRzKClcbiAge1xuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICB0aGlzLndyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9tZV9fZ2FsbGVyeV9fd3JhcHBlcicpXG4gICAgdGhpcy53cmFwX2JvdW5kcyA9IHRoaXMud3JhcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgdGhpcy51cGRhdGVTY2FsZSgpXG4gICAgdGhpcy51cGRhdGVYKClcbiAgICB0aGlzLnVwZGF0ZVkoKVxuXG4gICAgdGhpcy5wbGFuZS5wcm9ncmFtLnVuaWZvcm1zLnVfcGxhbmVTaXplLnZhbHVlID0gW3RoaXMucGxhbmUuc2NhbGUueCwgdGhpcy5wbGFuZS5zY2FsZS55XVxuXG4gICAgdGhpcy5mdWxsX3dpZHRoID0gKCh0aGlzLndyYXBfYm91bmRzLndpZHRoIC8gdGhpcy5zY3JlZW4ud2lkdGgpICogdGhpcy52aWV3cG9ydC53aWR0aClcbiAgfVxuXG4gIC8qXG4gICAgQW5pbWF0aW9ucy5cbiAgKi9cblxuICBzaG93KClcbiAge1xuICAgIGdzYXAuZnJvbVRvKHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51X2FscGhhLFxuICAgIHtcbiAgICAgIHZhbHVlOiAwLjAsXG4gICAgICBkdXJhdGlvbjogMVxuICAgIH0sXG4gICAge1xuICAgICAgdmFsdWU6IDEuMCxcbiAgICAgIGR1cmF0aW9uOiAxXG4gICAgfSlcbiAgfVxuXG4gIGhpZGUoKVxuICB7XG4gICAgZ3NhcC50byh0aGlzLnByb2dyYW0udW5pZm9ybXMudV9hbHBoYSxcbiAgICB7XG4gICAgICB2YWx1ZTogMC4wLFxuICAgICAgZHVyYXRpb246IDFcbiAgICB9KVxuICB9XG5cbiAgLypcbiAgICBFdmVudHMuXG4gICovXG5cbiAgb25SZXNpemUoc2l6ZXMpXG4gIHtcbiAgICB0aGlzLm5ld19wb3MgPSAwXG5cbiAgICBpZihzaXplcylcbiAgICB7XG4gICAgICBjb25zdCB7IHNjcmVlbiwgdmlld3BvcnQgfSA9IHNpemVzXG5cbiAgICAgIGlmKHNjcmVlbikgdGhpcy5zY3JlZW4gPSBzY3JlZW5cbiAgICAgIGlmKHZpZXdwb3J0KSB7XG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydFxuXG4gICAgICAgIHRoaXMucGxhbmUucHJvZ3JhbS51bmlmb3Jtcy51X3ZpZXdwb3J0U2l6ZS52YWx1ZSA9IFt0aGlzLnZpZXdwb3J0LndpZHRoLCB0aGlzLnZpZXdwb3J0LmhlaWdodF1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZUJvdW5kcygpXG4gIH1cblxuICAvKlxuICAgIFVwZGF0ZS5cbiAgKi9cblxuICB1cGRhdGVTY2FsZSgpXG4gIHtcbiAgICB0aGlzLnBsYW5lLnNjYWxlLnggPSB0aGlzLnZpZXdwb3J0LndpZHRoICogdGhpcy5ib3VuZHMud2lkdGggLyB0aGlzLnNjcmVlbi53aWR0aFxuICAgIHRoaXMucGxhbmUuc2NhbGUueSA9IHRoaXMudmlld3BvcnQuaGVpZ2h0ICogdGhpcy5ib3VuZHMuaGVpZ2h0IC8gdGhpcy5zY3JlZW4uaGVpZ2h0XG5cbiAgICB0aGlzLnBsYW5lLnByb2dyYW0udW5pZm9ybXMudV9wbGFuZVNpemUudmFsdWUgPSBbdGhpcy5wbGFuZS5zY2FsZS54LCB0aGlzLnBsYW5lLnNjYWxlLnldXG5cbiAgICAvLy8vLy8vLy8vLy8gYW4gaWRlYSBmb3IgZ2FsbGVyeSBzZWxlY3Rpb24gLy8vLy8vLy8vLy8vXG5cbiAgIGNvbnN0IHNjYWxlID0gZ3NhcC51dGlscy5tYXBSYW5nZSgwLCB0aGlzLnZpZXdwb3J0LndpZHRoIC8gMiwgMCwgLS4zLCBNYXRoLmFicyh0aGlzLnBsYW5lLnBvc2l0aW9uLngpKVxuXG4gICAgdGhpcy5wbGFuZS5zY2FsZS54ICs9IHNjYWxlXG4gICAgdGhpcy5wbGFuZS5zY2FsZS55ICs9IHNjYWxlXG4gIH1cblxuICB1cGRhdGVYKGN1cnJlbnQ9MClcbiAge1xuICAgIHRoaXMueCA9ICh0aGlzLmJvdW5kcy5sZWZ0IC0gY3VycmVudCkgLyB0aGlzLnNjcmVlbi53aWR0aFxuICAgIGNvbnN0IHBvc192aWV3cG9ydCA9IHRoaXMucGxhbmUucG9zaXRpb24ueCAtIHRoaXMueCAvIDEwMFxuXG4gICAgdGhpcy5wbGFuZS5wcm9ncmFtLnVuaWZvcm1zLnVfb2Zmc2V0LnZhbHVlID0gZ3NhcC51dGlscy5tYXBSYW5nZSgtNCwgNCwgLS4zNSwgLjM1LCBwb3Nfdmlld3BvcnQpXG5cbiAgICB0aGlzLnBsYW5lLnBvc2l0aW9uLnggPSAodGhpcy52aWV3cG9ydC53aWR0aCAvIDIpIC0gKHRoaXMucGxhbmUuc2NhbGUueCAvIDIpIC0gKHRoaXMueCAqIHRoaXMudmlld3BvcnQud2lkdGgpICsgdGhpcy5uZXdfcG9zXG4gIH1cblxuICB1cGRhdGVZKClcbiAge1xuICAgIHRoaXMueSA9IHRoaXMuYm91bmRzLnRvcCAvIHRoaXMuc2NyZWVuLmhlaWdodFxuXG4gICAgdGhpcy5wbGFuZS5wb3NpdGlvbi55ID0gKHRoaXMudmlld3BvcnQuaGVpZ2h0IC8gMikgLSAodGhpcy5wbGFuZS5zY2FsZS55IC8gMikgLSAodGhpcy55ICogdGhpcy52aWV3cG9ydC5oZWlnaHQpXG4gICAgdGhpcy5wbGFuZS5wb3NpdGlvbi55ICs9IE1hdGguY29zKCh0aGlzLnBsYW5lLnBvc2l0aW9uLnggLyB0aGlzLnZpZXdwb3J0LndpZHRoKSAqIE1hdGguUEkpICogMS4yNSAtIDEuMjU7XG4gIH1cblxuICB1cGRhdGUoc2Nyb2xsLCBkaXJlY3Rpb24pXG4gIHtcbiAgICBpZighdGhpcy5ib3VuZHMpIHJldHVyblxuXG4gICAgdGhpcy51cGRhdGVTY2FsZSgpXG4gICAgdGhpcy51cGRhdGVYKHNjcm9sbC5jdXJyZW50KVxuICAgIHRoaXMudXBkYXRlWSgpXG5cbiAgICB0aGlzLnBsYW5lLnByb2dyYW0udW5pZm9ybXMudV9zdHJlbmd0aC52YWx1ZSA9ICgoc2Nyb2xsLmN1cnJlbnQgLSBzY3JvbGwubGFzdCkgLyB0aGlzLnNjcmVlbi53aWR0aCkgKiAzMFxuXG4gICAgaWYoZGlyZWN0aW9uID09PSAndXAnKVxuICAgIHtcbiAgICAgIGNvbnN0IHggPSB0aGlzLnBsYW5lLnBvc2l0aW9uLnggKyB0aGlzLnBsYW5lLnNjYWxlLnhcblxuICAgICAgaWYoeCA8IC10aGlzLnZpZXdwb3J0LndpZHRoIC8gMilcbiAgICAgIHtcbiAgICAgICAgdGhpcy5uZXdfcG9zICs9IHRoaXMuZnVsbF93aWR0aFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKVxuICAgIHtcbiAgICAgIGNvbnN0IHggPSB0aGlzLnBsYW5lLnBvc2l0aW9uLnggLSB0aGlzLnBsYW5lLnNjYWxlLnhcblxuICAgICAgaWYoeCA+IHRoaXMudmlld3BvcnQud2lkdGggLyAyKVxuICAgICAge1xuICAgICAgICB0aGlzLm5ld19wb3MgLT0gdGhpcy5mdWxsX3dpZHRoXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmggPSAoKSA9PiAoXCI2MGQ5NjExMzQ4OGNiNmEyZTVmNVwiKSJdLCJuYW1lcyI6WyJNZW51RWxlbWVudCIsImNvbnN0cnVjdG9yIiwiZWxlbWVudCIsImluZGV4IiwidGV4dCIsImdlb21ldHJ5IiwiZ2wiLCJsZW5ndGgiLCJzY2VuZSIsInNjcmVlbiIsInZpZXdwb3J0IiwidGhpcyIsImdlbyIsIm5ld19wb3MiLCJjcmVhdGVNZXNoIiwiY3JlYXRlQm91bmRzIiwiaW1hZ2UiLCJJbWFnZSIsInRleHR1cmUiLCJUZXh0dXJlIiwiZ2VuZXJhdGVNaXBtYXBzIiwicHJvZ3JhbSIsIlByb2dyYW0iLCJ2ZXJ0ZXgiLCJmcmFnbWVudCIsInVuaWZvcm1zIiwidE1hcCIsInZhbHVlIiwidV9pbWFnZVNpemUiLCJ1X3BsYW5lU2l6ZSIsInVfYWxwaGEiLCJ1X29mZnNldCIsInVfc3RyZW5ndGgiLCJ1X3ZpZXdwb3J0U2l6ZSIsIndpZHRoIiwiaGVpZ2h0IiwiY3Jvc3NPcmlnaW4iLCJzcmMiLCJnZXRBdHRyaWJ1dGUiLCJvbmxvYWQiLCJuYXR1cmFsV2lkdGgiLCJuYXR1cmFsSGVpZ2h0IiwicGxhbmUiLCJNZXNoIiwic2V0UGFyZW50IiwiY3JlYXRlVGl0bGUiLCJ0aXRsZSIsIlRpdGxlIiwicmVuZGVyZXIiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3cmFwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwid3JhcF9ib3VuZHMiLCJ1cGRhdGVTY2FsZSIsInVwZGF0ZVgiLCJ1cGRhdGVZIiwic2NhbGUiLCJ4IiwieSIsImZ1bGxfd2lkdGgiLCJzaG93IiwiZ3NhcCIsImR1cmF0aW9uIiwiaGlkZSIsIm9uUmVzaXplIiwic2l6ZXMiLCJNYXRoIiwiYWJzIiwicG9zaXRpb24iLCJjdXJyZW50IiwibGVmdCIsInBvc192aWV3cG9ydCIsInRvcCIsImNvcyIsIlBJIiwidXBkYXRlIiwic2Nyb2xsIiwiZGlyZWN0aW9uIiwibGFzdCIsIl9fd2VicGFja19yZXF1aXJlX18iLCJoIl0sInNvdXJjZVJvb3QiOiIifQ==