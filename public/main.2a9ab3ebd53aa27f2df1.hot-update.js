/*! For license information please see main.2a9ab3ebd53aa27f2df1.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateitsforgotham("main",{"./app/components/Canvas/Gallery/objects/GalleryElement.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var i=s("./node_modules/ogl/src/core/Texture.js"),h=s("./node_modules/ogl/src/core/Program.js"),a=s("./node_modules/ogl/src/core/Mesh.js"),n=s("./node_modules/gsap/index.js"),l=s("./app/shaders/gallery/element/vertex.glsl"),o=s("./app/shaders/gallery/element/fragment.glsl");class r{constructor({element:e,index:t,geometry:s,gl:i,length:h,scene:a,screen:n,viewport:l}){this.element=e,this.index=t,this.geo=s,this.gl=i,this.length=h,this.scene=a,this.screen=n,this.viewport=l,this.new_pos=0,this.createMesh(),this.createBounds()}createMesh(){const e=new Image,t=new i.Texture(this.gl,{generateMipmaps:!1});this.program=new h.Program(this.gl,{vertex:l.default,fragment:o.default,uniforms:{tMap:{value:t},u_imageSize:{value:[0,0]},u_planeSize:{value:[0,0]},u_alpha:{value:0},u_offset:{value:0},u_scroll:{value:0},u_viewportSize:{value:[this.viewport.width,this.viewport.height]}}}),e.crossOrigin="anonymous",e.src=this.element.getAttribute("data-src"),e.onload=()=>{this.program.uniforms.u_imageSize.value=[e.naturalWidth,e.naturalHeight],t.image=e},this.plane=new a.Mesh(this.gl,{geometry:this.geo,program:this.program}),this.plane.index=this.index,this.plane.setParent(this.scene)}createBounds(){this.bounds=this.element.getBoundingClientRect(),this.updateScale(),this.updateX(),this.updateY(),this.plane.program.uniforms.u_planeSize.value=[this.plane.scale.x,this.plane.scale.y],this.gallery_height=this.length*this.bounds.height,this.full_height=this.gallery_height/this.screen.height*this.viewport.height,this.new_pos+=this.full_height,this.pos_x=Math.cos(this.index)*(this.screen.width/2/this.bounds.height)}show(){n.default.fromTo(this.program.uniforms.u_alpha,{value:0,duration:1},{value:1,duration:1})}hide(){n.default.to(this.program.uniforms.u_alpha,{value:0,duration:1})}onResize(e){if(this.new_pos=0,e){const{screen:t,viewport:s}=e;t&&(this.screen=t),s&&(this.viewport=s,this.plane.program.uniforms.u_viewportSize.value=[this.viewport.width,this.viewport.height])}this.createBounds()}updateScale(){this.plane.scale.x=this.viewport.width*this.bounds.width/this.screen.width,this.plane.scale.y=this.viewport.height*this.bounds.height/this.screen.height,this.plane.program.uniforms.u_planeSize.value=[this.plane.scale.x,this.plane.scale.y]}updateX(){this.x=this.bounds.left/this.screen.width,this.plane.position.x=-this.viewport.width/2+this.plane.scale.x/2+this.x*this.viewport.width+this.pos_x}updateY(e=0){this.y=(this.bounds.top-e)/this.screen.height;const t=this.plane.position.y-this.y/100;this.plane.program.uniforms.u_offset.value=n.default.utils.mapRange(-4,4,-.35,.35,t),this.plane.position.y=this.viewport.height/2-this.plane.scale.y/2-this.y*this.viewport.height+this.new_pos}update(e,t,s){if(this.bounds){if(this.updateScale(),this.updateX(),this.updateY(e),this.plane.program.uniforms.u_scroll.value=(e-t)/this.screen.height*15,"up"===s){this.plane.position.y+this.plane.scale.y<-this.viewport.height/2&&(this.new_pos+=this.full_height)}if("down"===s){this.plane.position.y-this.plane.scale.y>this.viewport.height/2&&(this.new_pos-=this.full_height)}}}}}},(function(e){e.h=()=>"5a2305d5da1ed3b61c9d"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi4yYTlhYjNlYmQ1M2FhMjdmMmRmMS5ob3QtdXBkYXRlLmpzIiwibWFwcGluZ3MiOiI7OGFBTWUsTUFBTUEsRUFFbkJDLGFBQVksUUFBRUMsRUFBTyxNQUFFQyxFQUFLLFNBQUVDLEVBQVEsR0FBRUMsRUFBRSxPQUFFQyxFQUFNLE1BQUVDLEVBQUssT0FBRUMsRUFBTSxTQUFFQyxJQUVqRUMsS0FBS1IsUUFBVUEsRUFDZlEsS0FBS1AsTUFBUUEsRUFDYk8sS0FBS0MsSUFBTVAsRUFDWE0sS0FBS0wsR0FBS0EsRUFDVkssS0FBS0osT0FBU0EsRUFDZEksS0FBS0gsTUFBUUEsRUFDYkcsS0FBS0YsT0FBU0EsRUFDZEUsS0FBS0QsU0FBV0EsRUFFaEJDLEtBQUtFLFFBQVUsRUFFZkYsS0FBS0csYUFFTEgsS0FBS0ksY0FDUCxDQU1BRCxhQUVFLE1BQU1FLEVBQVEsSUFBSUMsTUFDWkMsRUFBVSxJQUFJQyxFQUFBQSxRQUFRUixLQUFLTCxHQUFJLENBQ25DYyxpQkFBaUIsSUFHbkJULEtBQUtVLFFBQVUsSUFBSUMsRUFBQUEsUUFBUVgsS0FBS0wsR0FDaEMsQ0FDRWlCLE9BQU0sVUFDTkMsU0FBUSxVQUNSQyxTQUNBLENBQ0VDLEtBQU0sQ0FBRUMsTUFBT1QsR0FDZlUsWUFBYSxDQUFFRCxNQUFPLENBQUMsRUFBRyxJQUMxQkUsWUFBYSxDQUFFRixNQUFPLENBQUMsRUFBRyxJQUMxQkcsUUFBUyxDQUFFSCxNQUFPLEdBQ2xCSSxTQUFVLENBQUVKLE1BQU8sR0FDbkJLLFNBQVUsQ0FBRUwsTUFBTyxHQUNuQk0sZUFBZ0IsQ0FBRU4sTUFBTyxDQUFDaEIsS0FBS0QsU0FBU3dCLE1BQU92QixLQUFLRCxTQUFTeUIsWUFJakVuQixFQUFNb0IsWUFBYyxZQUNwQnBCLEVBQU1xQixJQUFNMUIsS0FBS1IsUUFBUW1DLGFBQWEsWUFDdEN0QixFQUFNdUIsT0FBUyxLQUViNUIsS0FBS1UsUUFBUUksU0FBU0csWUFBWUQsTUFBUSxDQUFDWCxFQUFNd0IsYUFBY3hCLEVBQU15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UyxFQUFNeEIsS0FBSytCLE1BQU1RLE1BQU1FLEVBQUksRUFBTXpDLEtBQUt5QyxFQUFJekMsS0FBS0QsU0FBU3lCLE9BQVV4QixLQUFLRSxPQUN6SCxDQUVBd0QsT0FBT0gsRUFBU0ksRUFBTUMsR0FFcEIsR0FBSTVELEtBQUtrQyxPQUFULENBUUEsR0FOQWxDLEtBQUtvQyxjQUNMcEMsS0FBS3FDLFVBQ0xyQyxLQUFLc0MsUUFBUWlCLEdBRWJ2RCxLQUFLK0IsTUFBTXJCLFFBQVFJLFNBQVNPLFNBQVNMLE9BQVV1QyxFQUFVSSxHQUFRM0QsS0FBS0YsT0FBTzBCLE9BQVUsR0FFdEUsT0FBZG9DLEVBQ0gsQ0FDWTVELEtBQUsrQixNQUFNdUIsU0FBU2IsRUFBSXpDLEtBQUsrQixNQUFNUSxNQUFNRSxHQUUzQ3pDLEtBQUtELFNBQVN5QixPQUFTLElBRTdCeEIsS0FBS0UsU0FBV0YsS0FBSzJDLFlBRXpCLENBRUEsR0FBaUIsU0FBZGlCLEVBQ0gsQ0FDWTVELEtBQUsrQixNQUFNdUIsU0FBU2IsRUFBSXpDLEtBQUsrQixNQUFNUSxNQUFNRSxFQUU1Q3pDLEtBQUtELFNBQVN5QixPQUFTLElBRTVCeEIsS0FBS0UsU0FBV0YsS0FBSzJDLFlBRXpCLENBMUJ1QixDQTJCekIsa0JDbk1Ga0IsRUFBb0JDLEVBQUksSUFBTSIsInNvdXJjZXMiOlsid2VicGFjazovL2l0c2ZvcmdvdGhhbS8uL2FwcC9jb21wb25lbnRzL0NhbnZhcy9HYWxsZXJ5L29iamVjdHMvR2FsbGVyeUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vaXRzZm9yZ290aGFtL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZXNoLCBQcm9ncmFtLCBUZXh0dXJlIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCdcblxuaW1wb3J0IHZlcnRleCBmcm9tICdzaGFkZXJzL2dhbGxlcnkvZWxlbWVudC92ZXJ0ZXguZ2xzbCdcbmltcG9ydCBmcmFnbWVudCBmcm9tICdzaGFkZXJzL2dhbGxlcnkvZWxlbWVudC9mcmFnbWVudC5nbHNsJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5RWxlbWVudFxue1xuICBjb25zdHJ1Y3Rvcih7IGVsZW1lbnQsIGluZGV4LCBnZW9tZXRyeSwgZ2wsIGxlbmd0aCwgc2NlbmUsIHNjcmVlbiwgdmlld3BvcnQgfSlcbiAge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnRcbiAgICB0aGlzLmluZGV4ID0gaW5kZXhcbiAgICB0aGlzLmdlbyA9IGdlb21ldHJ5XG4gICAgdGhpcy5nbCA9IGdsXG4gICAgdGhpcy5sZW5ndGggPSBsZW5ndGhcbiAgICB0aGlzLnNjZW5lID0gc2NlbmVcbiAgICB0aGlzLnNjcmVlbiA9IHNjcmVlblxuICAgIHRoaXMudmlld3BvcnQgPSB2aWV3cG9ydFxuXG4gICAgdGhpcy5uZXdfcG9zID0gMFxuXG4gICAgdGhpcy5jcmVhdGVNZXNoKClcblxuICAgIHRoaXMuY3JlYXRlQm91bmRzKClcbiAgfVxuXG4gIC8qXG4gICAgQ3JlYXRlLlxuICAqL1xuXG4gIGNyZWF0ZU1lc2goKVxuICB7XG4gICAgY29uc3QgaW1hZ2UgPSBuZXcgSW1hZ2UoKVxuICAgIGNvbnN0IHRleHR1cmUgPSBuZXcgVGV4dHVyZSh0aGlzLmdsLCB7XG4gICAgICBnZW5lcmF0ZU1pcG1hcHM6IGZhbHNlXG4gICAgfSlcblxuICAgIHRoaXMucHJvZ3JhbSA9IG5ldyBQcm9ncmFtKHRoaXMuZ2wsXG4gICAge1xuICAgICAgdmVydGV4LFxuICAgICAgZnJhZ21lbnQsXG4gICAgICB1bmlmb3JtczpcbiAgICAgIHtcbiAgICAgICAgdE1hcDogeyB2YWx1ZTogdGV4dHVyZSB9LFxuICAgICAgICB1X2ltYWdlU2l6ZTogeyB2YWx1ZTogWzAsIDBdIH0sXG4gICAgICAgIHVfcGxhbmVTaXplOiB7IHZhbHVlOiBbMCwgMF0gfSxcbiAgICAgICAgdV9hbHBoYTogeyB2YWx1ZTogMC4wIH0sXG4gICAgICAgIHVfb2Zmc2V0OiB7IHZhbHVlOiAwIH0sXG4gICAgICAgIHVfc2Nyb2xsOiB7IHZhbHVlOiAwIH0sXG4gICAgICAgIHVfdmlld3BvcnRTaXplOiB7IHZhbHVlOiBbdGhpcy52aWV3cG9ydC53aWR0aCwgdGhpcy52aWV3cG9ydC5oZWlnaHRdIH1cbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJ1xuICAgIGltYWdlLnNyYyA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJylcbiAgICBpbWFnZS5vbmxvYWQgPSAoKSA9PlxuICAgIHtcbiAgICAgIHRoaXMucHJvZ3JhbS51bmlmb3Jtcy51X2ltYWdlU2l6ZS52YWx1ZSA9IFtpbWFnZS5uYXR1cmFsV2lkdGgsIGltYWdlLm5hdHVyYWxIZWlnaHRdXG4gICAgICB0ZXh0dXJlLmltYWdlID0gaW1hZ2VcbiAgICB9XG5cbiAgICB0aGlzLnBsYW5lID0gbmV3IE1lc2godGhpcy5nbCwge1xuICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvLFxuICAgICAgcHJvZ3JhbTogdGhpcy5wcm9ncmFtXG4gICAgfSlcblxuICAgIHRoaXMucGxhbmUuaW5kZXggPSB0aGlzLmluZGV4XG5cbiAgICB0aGlzLnBsYW5lLnNldFBhcmVudCh0aGlzLnNjZW5lKVxuICB9XG5cbiAgY3JlYXRlQm91bmRzKClcbiAge1xuICAgIHRoaXMuYm91bmRzID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG5cbiAgICB0aGlzLnVwZGF0ZVNjYWxlKClcbiAgICB0aGlzLnVwZGF0ZVgoKVxuICAgIHRoaXMudXBkYXRlWSgpXG5cbiAgICB0aGlzLnBsYW5lLnByb2dyYW0udW5pZm9ybXMudV9wbGFuZVNpemUudmFsdWUgPSBbdGhpcy5wbGFuZS5zY2FsZS54LCB0aGlzLnBsYW5lLnNjYWxlLnldXG5cbiAgICB0aGlzLmdhbGxlcnlfaGVpZ2h0ID0gdGhpcy5sZW5ndGggKiB0aGlzLmJvdW5kcy5oZWlnaHRcbiAgICB0aGlzLmZ1bGxfaGVpZ2h0ID0gKCh0aGlzLmdhbGxlcnlfaGVpZ2h0IC8gdGhpcy5zY3JlZW4uaGVpZ2h0KSAqIHRoaXMudmlld3BvcnQuaGVpZ2h0KVxuICAgIHRoaXMubmV3X3BvcyArPSB0aGlzLmZ1bGxfaGVpZ2h0XG5cbiAgICB0aGlzLnBvc194ID0gTWF0aC5jb3ModGhpcy5pbmRleCkgKiAoKHRoaXMuc2NyZWVuLndpZHRoIC8gMikgLyB0aGlzLmJvdW5kcy5oZWlnaHQpXG4gIH1cblxuICAvKlxuICAgIEFuaW1hdGlvbnMuXG4gICovXG5cbiAgc2hvdygpXG4gIHtcbiAgICBnc2FwLmZyb21Ubyh0aGlzLnByb2dyYW0udW5pZm9ybXMudV9hbHBoYSxcbiAgICB7XG4gICAgICB2YWx1ZTogMC4wLFxuICAgICAgZHVyYXRpb246IDFcbiAgICB9LFxuICAgIHtcbiAgICAgIHZhbHVlOiAxLjAsXG4gICAgICBkdXJhdGlvbjogMVxuICAgIH0pXG4gIH1cblxuICBoaWRlKClcbiAge1xuICAgIGdzYXAudG8odGhpcy5wcm9ncmFtLnVuaWZvcm1zLnVfYWxwaGEsXG4gICAge1xuICAgICAgdmFsdWU6IDAuMCxcbiAgICAgIGR1cmF0aW9uOiAxXG4gICAgfSlcbiAgfVxuXG4gIC8qXG4gICAgRXZlbnRzLlxuICAqL1xuXG4gIG9uUmVzaXplKHNpemVzKVxuICB7XG4gICAgdGhpcy5uZXdfcG9zID0gMFxuXG4gICAgaWYoc2l6ZXMpXG4gICAge1xuICAgICAgY29uc3QgeyBzY3JlZW4sIHZpZXdwb3J0IH0gPSBzaXplc1xuXG4gICAgICBpZihzY3JlZW4pIHRoaXMuc2NyZWVuID0gc2NyZWVuXG4gICAgICBpZih2aWV3cG9ydCkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0ID0gdmlld3BvcnRcblxuICAgICAgICB0aGlzLnBsYW5lLnByb2dyYW0udW5pZm9ybXMudV92aWV3cG9ydFNpemUudmFsdWUgPSBbdGhpcy52aWV3cG9ydC53aWR0aCwgdGhpcy52aWV3cG9ydC5oZWlnaHRdXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jcmVhdGVCb3VuZHMoKVxuICB9XG5cbiAgLypcbiAgICBVcGRhdGUuXG4gICovXG5cbiAgdXBkYXRlU2NhbGUoKVxuICB7XG4gICAgdGhpcy5wbGFuZS5zY2FsZS54ID0gdGhpcy52aWV3cG9ydC53aWR0aCAqIHRoaXMuYm91bmRzLndpZHRoIC8gdGhpcy5zY3JlZW4ud2lkdGhcbiAgICB0aGlzLnBsYW5lLnNjYWxlLnkgPSB0aGlzLnZpZXdwb3J0LmhlaWdodCAqIHRoaXMuYm91bmRzLmhlaWdodCAvIHRoaXMuc2NyZWVuLmhlaWdodFxuXG4gICAgdGhpcy5wbGFuZS5wcm9ncmFtLnVuaWZvcm1zLnVfcGxhbmVTaXplLnZhbHVlID0gW3RoaXMucGxhbmUuc2NhbGUueCwgdGhpcy5wbGFuZS5zY2FsZS55XVxuICB9XG5cbiAgdXBkYXRlWCgpXG4gIHtcbiAgICB0aGlzLnggPSB0aGlzLmJvdW5kcy5sZWZ0IC8gdGhpcy5zY3JlZW4ud2lkdGhcblxuICAgIHRoaXMucGxhbmUucG9zaXRpb24ueCA9ICgtdGhpcy52aWV3cG9ydC53aWR0aCAvIDIpICsgKHRoaXMucGxhbmUuc2NhbGUueCAvIDIpICsgKHRoaXMueCAqIHRoaXMudmlld3BvcnQud2lkdGgpICsgdGhpcy5wb3NfeFxuICB9XG5cbiAgdXBkYXRlWShjdXJyZW50PTApXG4gIHtcbiAgICB0aGlzLnkgPSAodGhpcy5ib3VuZHMudG9wIC0gY3VycmVudCkgLyB0aGlzLnNjcmVlbi5oZWlnaHRcbiAgICBjb25zdCBwb3Nfdmlld3BvcnQgPSB0aGlzLnBsYW5lLnBvc2l0aW9uLnkgLSB0aGlzLnkgLyAxMDBcblxuICAgIHRoaXMucGxhbmUucHJvZ3JhbS51bmlmb3Jtcy51X29mZnNldC52YWx1ZSA9IGdzYXAudXRpbHMubWFwUmFuZ2UoLTQsIDQsIC0uMzUsIC4zNSwgcG9zX3ZpZXdwb3J0KVxuXG4gICAgdGhpcy5wbGFuZS5wb3NpdGlvbi55ID0gKHRoaXMudmlld3BvcnQuaGVpZ2h0IC8gMikgLSAodGhpcy5wbGFuZS5zY2FsZS55IC8gMikgLSAodGhpcy55ICogdGhpcy52aWV3cG9ydC5oZWlnaHQpICsgdGhpcy5uZXdfcG9zXG4gIH1cblxuICB1cGRhdGUoY3VycmVudCwgbGFzdCwgZGlyZWN0aW9uKVxuICB7XG4gICAgaWYoIXRoaXMuYm91bmRzKSByZXR1cm5cblxuICAgIHRoaXMudXBkYXRlU2NhbGUoKVxuICAgIHRoaXMudXBkYXRlWCgpXG4gICAgdGhpcy51cGRhdGVZKGN1cnJlbnQpXG5cbiAgICB0aGlzLnBsYW5lLnByb2dyYW0udW5pZm9ybXMudV9zY3JvbGwudmFsdWUgPSAoKGN1cnJlbnQgLSBsYXN0KSAvIHRoaXMuc2NyZWVuLmhlaWdodCkgKiAxNVxuXG4gICAgaWYoZGlyZWN0aW9uID09PSAndXAnKVxuICAgIHtcbiAgICAgIGNvbnN0IHkgPSB0aGlzLnBsYW5lLnBvc2l0aW9uLnkgKyB0aGlzLnBsYW5lLnNjYWxlLnlcblxuICAgICAgaWYoeSA8IC10aGlzLnZpZXdwb3J0LmhlaWdodCAvIDIpXG4gICAgICB7XG4gICAgICAgIHRoaXMubmV3X3BvcyArPSB0aGlzLmZ1bGxfaGVpZ2h0XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoZGlyZWN0aW9uID09PSAnZG93bicpXG4gICAge1xuICAgICAgY29uc3QgeSA9IHRoaXMucGxhbmUucG9zaXRpb24ueSAtIHRoaXMucGxhbmUuc2NhbGUueVxuXG4gICAgICBpZih5ID4gdGhpcy52aWV3cG9ydC5oZWlnaHQgLyAyKVxuICAgICAge1xuICAgICAgICB0aGlzLm5ld19wb3MgLT0gdGhpcy5mdWxsX2hlaWdodFxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5oID0gKCkgPT4gKFwiNWEyMzA1ZDVkYTFlZDNiNjFjOWRcIikiXSwibmFtZXMiOlsiR2FsbGVyeUVsZW1lbnQiLCJjb25zdHJ1Y3RvciIsImVsZW1lbnQiLCJpbmRleCIsImdlb21ldHJ5IiwiZ2wiLCJsZW5ndGgiLCJzY2VuZSIsInNjcmVlbiIsInZpZXdwb3J0IiwidGhpcyIsImdlbyIsIm5ld19wb3MiLCJjcmVhdGVNZXNoIiwiY3JlYXRlQm91bmRzIiwiaW1hZ2UiLCJJbWFnZSIsInRleHR1cmUiLCJUZXh0dXJlIiwiZ2VuZXJhdGVNaXBtYXBzIiwicHJvZ3JhbSIsIlByb2dyYW0iLCJ2ZXJ0ZXgiLCJmcmFnbWVudCIsInVuaWZvcm1zIiwidE1hcCIsInZhbHVlIiwidV9pbWFnZVNpemUiLCJ1X3BsYW5lU2l6ZSIsInVfYWxwaGEiLCJ1X29mZnNldCIsInVfc2Nyb2xsIiwidV92aWV3cG9ydFNpemUiLCJ3aWR0aCIsImhlaWdodCIsImNyb3NzT3JpZ2luIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwib25sb2FkIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsInBsYW5lIiwiTWVzaCIsInNldFBhcmVudCIsImJvdW5kcyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInVwZGF0ZVNjYWxlIiwidXBkYXRlWCIsInVwZGF0ZVkiLCJzY2FsZSIsIngiLCJ5IiwiZ2FsbGVyeV9oZWlnaHQiLCJmdWxsX2hlaWdodCIsInBvc194IiwiTWF0aCIsImNvcyIsInNob3ciLCJnc2FwIiwiZHVyYXRpb24iLCJoaWRlIiwib25SZXNpemUiLCJzaXplcyIsImxlZnQiLCJwb3NpdGlvbiIsImN1cnJlbnQiLCJ0b3AiLCJwb3Nfdmlld3BvcnQiLCJ1cGRhdGUiLCJsYXN0IiwiZGlyZWN0aW9uIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9