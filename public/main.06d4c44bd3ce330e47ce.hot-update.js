/*! For license information please see main.06d4c44bd3ce330e47ce.hot-update.js.LICENSE.txt */
"use strict";self.webpackHotUpdateitsforgotham("main",{"./app/components/Canvas/Home/index.js":(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var i=s("./node_modules/ogl/src/core/Transform.js"),o=s("./node_modules/ogl/src/extras/Plane.js"),l=s("./node_modules/gsap/index.js"),r=s("./node_modules/lodash/map.js"),h=s.n(r),c=s("./node_modules/prefix/index.js"),n=s.n(c),a=s("./app/components/Canvas/Home/menu/ImageEl.js");class _{constructor({gl:e,scene:t,screen:s,viewport:o,camera:l}){this.gl=e,this.scene=t,this.screen=s,this.viewport=o,this.camera=l,this.group=new i.Transform,this.scroll={current:0,target:0,last:0,speed:.1,ease:.05},this.t_prefix=n()("transform"),this.createGeometry(),this.getElements(),this.createMenu(),this.createMenuSelector(),this.onResize(),this.group.setParent(this.scene),this.show()}createGeometry(){this.geo=new o.Plane(this.gl,{heightSegments:10,widthSegments:10})}getElements(){this.gallery_element=document.querySelector(".home__gallery"),this.gallery_wrapper=document.querySelector(".home__gallery__wrapper"),this.selector_videos=document.querySelector(".selectors__videos"),this.selector_photos=document.querySelector(".selectors__photos"),this.img_el=document.querySelectorAll("img.home__gallery__image__media__image"),this.vid_el=document.querySelectorAll("img.home__gallery__video__media__image"),this.img_length=this.img_el.length,this.vid_length=this.vid_el.length}createMenu(){this.image_elements=h()(this.img_el,((e,t)=>new a.default({element:e,index:t,geometry:this.geo,gl:this.gl,length:this.img_length,scene:this.group,screen:this.screen,viewport:this.viewport}))),this.video_elements=h()(this.vid_el,((e,t)=>new a.default({element:e,index:t,geometry:this.geo,gl:this.gl,length:this.vid_length,scene:this.group,screen:this.screen,viewport:this.viewport})))}createMenuSelector(){this.selector_videos.setAttribute("class","selectors__videos--active"),this.selector_photos.addEventListener("click",(()=>{l.default.to(this.scroll,{target:-this.scroll.limit,duration:.5}),this.selector_videos.setAttribute("class","selectors__videos"),this.selector_photos.setAttribute("class","selectors__photos--active")})),this.selector_videos.addEventListener("click",(()=>{l.default.to(this.scroll,{target:0,duration:.5}),this.selector_photos.setAttribute("class","selectors__photos"),this.selector_videos.setAttribute("class","selectors__videos--active")}))}show(){h()(this.image_elements,(e=>e.show())),h()(this.video_elements,(e=>e.show()))}hide(){h()(this.image_elements,(e=>e.hide())),h()(this.video_elements,(e=>e.hide()))}onResize(){this.bounds=this.gallery_wrapper.getBoundingClientRect(),h()(this.image_elements,(e=>e.onResize({screen:this.screen,viewport:this.viewport}))),h()(this.video_elements,(e=>e.onResize({screen:this.screen,viewport:this.viewport}))),this.scroll.limit=this.bounds.width-this.image_elements[0].element.clientWidth}onTouchDown({y:e,x:t}){this.scroll.position=this.scroll.current}onTouchMove({y:e,x:t}){const s=t.start-t.end;this.scroll.target=this.scroll.position-s}onTouchUp({y:e,x:t}){}onWheel({pixelY:e,pixelX:t}){this.scroll.target-=.5*t}update(){this.scroll.target=l.default.utils.clamp(-this.scroll.limit,0,this.scroll.target),this.scroll.current=l.default.utils.interpolate(this.scroll.current,this.scroll.target,this.scroll.ease),this.gallery_element.style[this.t_prefix]=`translateX(${this.scroll.current}px)`,h()(this.image_elements,(e=>e.update(this.scroll))),h()(this.video_elements,(e=>e.update(this.scroll))),this.scroll.last=this.scroll.current,this.scroll.current<=-this.scroll.limit/2?this.selector_videos.classList.contains("selectors__videos--active")&&(this.selector_videos.setAttribute("class","selectors__videos"),this.selector_photos.setAttribute("class","selectors__photos--active")):this.selector_photos.classList.contains("selectors__photos--active")&&(this.selector_photos.setAttribute("class","selectors__photos"),this.selector_videos.setAttribute("class","selectors__videos--active"))}destroy(){this.scene.removeChild(this.group)}}}},(function(e){e.h=()=>"934ad0a1b3ebf098c829"}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEUrQixJQUFJbkMsS0FBS2tDLGdCQUFnQkUsR0FBV0EsRUFBUTJCLE9BQU8vRCxLQUFLRyxVQUN4RGdDLElBQUluQyxLQUFLd0MsZ0JBQWdCSixHQUFXQSxFQUFRMkIsT0FBTy9ELEtBQUtHLFVBRXhESCxLQUFLRyxPQUFPRyxLQUFPTixLQUFLRyxPQUFPQyxRQUU1QkosS0FBS0csT0FBT0MsVUFBWUosS0FBS0csT0FBT3lDLE1BQVEsRUFFMUM1QyxLQUFLMEIsZ0JBQWdCdUMsVUFBVUMsU0FBUywrQkFFekNsRSxLQUFLMEIsZ0JBQWdCZSxhQUFhLFFBQVMscUJBQzNDekMsS0FBSzJCLGdCQUFnQmMsYUFBYSxRQUFTLDhCQUsxQ3pDLEtBQUsyQixnQkFBZ0JzQyxVQUFVQyxTQUFTLCtCQUV6Q2xFLEtBQUsyQixnQkFBZ0JjLGFBQWEsUUFBUyxxQkFDM0N6QyxLQUFLMEIsZ0JBQWdCZSxhQUFhLFFBQVMsNkJBR2pELENBTUEwQixVQUVFbkUsS0FBS0osTUFBTXdFLFlBQVlwRSxLQUFLQyxNQUM5QixrQkNsT0ZvRSxFQUFvQkMsRUFBSSxJQUFNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaXRzZm9yZ290aGFtLy4vYXBwL2NvbXBvbmVudHMvQ2FudmFzL0hvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vaXRzZm9yZ290aGFtL3dlYnBhY2svcnVudGltZS9nZXRGdWxsSGFzaCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQbGFuZSwgVHJhbnNmb3JtIH0gZnJvbSAnb2dsJ1xuaW1wb3J0IGdzYXAgZnJvbSAnZ3NhcCdcblxuaW1wb3J0IG1hcCBmcm9tICdsb2Rhc2gvbWFwJ1xuaW1wb3J0IFByZWZpeCBmcm9tICdwcmVmaXgnXG5cbmltcG9ydCBJbWFnZUVsIGZyb20gJy4vbWVudS9JbWFnZUVsJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYWxsZXJ5XG57XG4gIGNvbnN0cnVjdG9yKHsgZ2wsIHNjZW5lLCBzY3JlZW4sIHZpZXdwb3J0LCBjYW1lcmEgfSlcbiAge1xuICAgIHRoaXMuZ2wgPSBnbFxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZVxuICAgIHRoaXMuc2NyZWVuID0gc2NyZWVuXG4gICAgdGhpcy52aWV3cG9ydCA9IHZpZXdwb3J0XG4gICAgdGhpcy5jYW1lcmEgPSBjYW1lcmFcblxuICAgIHRoaXMuZ3JvdXAgPSBuZXcgVHJhbnNmb3JtKClcblxuICAgIHRoaXMuc2Nyb2xsID0ge1xuICAgICAgY3VycmVudDogMCxcbiAgICAgIHRhcmdldDogMCxcbiAgICAgIGxhc3Q6IDAsXG4gICAgICBzcGVlZDogMC4xLFxuICAgICAgZWFzZTogMC4wNVxuICAgIH1cblxuICAgIHRoaXMudF9wcmVmaXggPSBQcmVmaXgoJ3RyYW5zZm9ybScpXG5cbiAgICB0aGlzLmNyZWF0ZUdlb21ldHJ5KClcbiAgICB0aGlzLmdldEVsZW1lbnRzKClcbiAgICB0aGlzLmNyZWF0ZU1lbnUoKVxuICAgIHRoaXMuY3JlYXRlTWVudVNlbGVjdG9yKClcblxuICAgIHRoaXMub25SZXNpemUoKVxuXG4gICAgdGhpcy5ncm91cC5zZXRQYXJlbnQodGhpcy5zY2VuZSlcblxuICAgIHRoaXMuc2hvdygpXG4gIH1cblxuICBjcmVhdGVHZW9tZXRyeSgpXG4gIHtcbiAgICB0aGlzLmdlbyA9IG5ldyBQbGFuZSh0aGlzLmdsLFxuICAgIHtcbiAgICAgIGhlaWdodFNlZ21lbnRzOiAxMCxcbiAgICAgIHdpZHRoU2VnbWVudHM6IDEwXG4gICAgfSlcbiAgfVxuXG4gIGdldEVsZW1lbnRzKClcbiAge1xuICAgIHRoaXMuZ2FsbGVyeV9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2dhbGxlcnknKVxuICAgIHRoaXMuZ2FsbGVyeV93cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhvbWVfX2dhbGxlcnlfX3dyYXBwZXInKVxuXG4gICAgdGhpcy5zZWxlY3Rvcl92aWRlb3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0b3JzX192aWRlb3MnKVxuICAgIHRoaXMuc2VsZWN0b3JfcGhvdG9zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdG9yc19fcGhvdG9zJylcblxuICAgIHRoaXMuaW1nX2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nLmhvbWVfX2dhbGxlcnlfX2ltYWdlX19tZWRpYV9faW1hZ2UnKVxuICAgIHRoaXMudmlkX2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW1nLmhvbWVfX2dhbGxlcnlfX3ZpZGVvX19tZWRpYV9faW1hZ2UnKVxuXG4gICAgdGhpcy5pbWdfbGVuZ3RoID0gdGhpcy5pbWdfZWwubGVuZ3RoXG4gICAgdGhpcy52aWRfbGVuZ3RoID0gdGhpcy52aWRfZWwubGVuZ3RoXG4gIH1cblxuICBjcmVhdGVNZW51KClcbiAge1xuICAgIHRoaXMuaW1hZ2VfZWxlbWVudHMgPSBtYXAodGhpcy5pbWdfZWwsIChlbGVtZW50LCBpbmRleCkgPT5cbiAgICB7XG4gICAgICByZXR1cm4gbmV3IEltYWdlRWwoe1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBpbmRleCxcbiAgICAgICAgZ2VvbWV0cnk6IHRoaXMuZ2VvLFxuICAgICAgICBnbDogdGhpcy5nbCxcbiAgICAgICAgbGVuZ3RoOiB0aGlzLmltZ19sZW5ndGgsXG4gICAgICAgIHNjZW5lOiB0aGlzLmdyb3VwLFxuICAgICAgICBzY3JlZW46IHRoaXMuc2NyZWVuLFxuICAgICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydFxuICAgICAgfSlcbiAgICB9KVxuXG4gICAgdGhpcy52aWRlb19lbGVtZW50cyA9IG1hcCh0aGlzLnZpZF9lbCwgKGVsZW1lbnQsIGluZGV4KSA9PlxuICAgIHtcbiAgICAgIHJldHVybiBuZXcgSW1hZ2VFbCh7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBnZW9tZXRyeTogdGhpcy5nZW8sXG4gICAgICAgIGdsOiB0aGlzLmdsLFxuICAgICAgICBsZW5ndGg6IHRoaXMudmlkX2xlbmd0aCxcbiAgICAgICAgc2NlbmU6IHRoaXMuZ3JvdXAsXG4gICAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sXG4gICAgICAgIHZpZXdwb3J0OiB0aGlzLnZpZXdwb3J0XG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBjcmVhdGVNZW51U2VsZWN0b3IoKVxuICB7XG4gICAgdGhpcy5zZWxlY3Rvcl92aWRlb3Muc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RvcnNfX3ZpZGVvcy0tYWN0aXZlJylcblxuICAgIHRoaXMuc2VsZWN0b3JfcGhvdG9zLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT5cbiAgICB7XG4gICAgICBnc2FwLnRvKHRoaXMuc2Nyb2xsLFxuICAgICAge1xuICAgICAgICB0YXJnZXQ6IC10aGlzLnNjcm9sbC5saW1pdCxcbiAgICAgICAgZHVyYXRpb246IDAuNSxcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMuc2VsZWN0b3JfdmlkZW9zLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VsZWN0b3JzX192aWRlb3MnKVxuICAgICAgdGhpcy5zZWxlY3Rvcl9waG90b3Muc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RvcnNfX3Bob3Rvcy0tYWN0aXZlJylcbiAgICB9KVxuXG4gICAgdGhpcy5zZWxlY3Rvcl92aWRlb3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxuICAgIHtcbiAgICAgIGdzYXAudG8odGhpcy5zY3JvbGwsXG4gICAgICB7XG4gICAgICAgIHRhcmdldDogMCxcbiAgICAgICAgZHVyYXRpb246IDAuNSxcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMuc2VsZWN0b3JfcGhvdG9zLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VsZWN0b3JzX19waG90b3MnKVxuICAgICAgdGhpcy5zZWxlY3Rvcl92aWRlb3Muc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RvcnNfX3ZpZGVvcy0tYWN0aXZlJylcbiAgICB9KVxuICB9XG5cbiAgLypcbiAgICBBbmltYXRpb25zLlxuICAqL1xuXG4gIHNob3coKVxuICB7XG4gICAgbWFwKHRoaXMuaW1hZ2VfZWxlbWVudHMsIGVsZW1lbnQgPT4gZWxlbWVudC5zaG93KCkpXG4gICAgbWFwKHRoaXMudmlkZW9fZWxlbWVudHMsIGVsZW1lbnQgPT4gZWxlbWVudC5zaG93KCkpXG4gIH1cblxuICBoaWRlKClcbiAge1xuICAgIG1hcCh0aGlzLmltYWdlX2VsZW1lbnRzLCBlbGVtZW50ID0+IGVsZW1lbnQuaGlkZSgpKVxuICAgIG1hcCh0aGlzLnZpZGVvX2VsZW1lbnRzLCBlbGVtZW50ID0+IGVsZW1lbnQuaGlkZSgpKVxuICB9XG5cbiAgLypcbiAgICBFdmVudHMuXG4gICovXG5cbiAgb25SZXNpemUoKVxuICB7XG4gICAgdGhpcy5ib3VuZHMgPSB0aGlzLmdhbGxlcnlfd3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuXG4gICAgbWFwKHRoaXMuaW1hZ2VfZWxlbWVudHMsIGVsZW1lbnQgPT4gZWxlbWVudC5vblJlc2l6ZSh7XG4gICAgICBzY3JlZW46IHRoaXMuc2NyZWVuLFxuICAgICAgdmlld3BvcnQ6IHRoaXMudmlld3BvcnQsXG4gICAgfSkpXG5cbiAgICBtYXAodGhpcy52aWRlb19lbGVtZW50cywgZWxlbWVudCA9PiBlbGVtZW50Lm9uUmVzaXplKHtcbiAgICAgIHNjcmVlbjogdGhpcy5zY3JlZW4sXG4gICAgICB2aWV3cG9ydDogdGhpcy52aWV3cG9ydCxcbiAgICB9KSlcblxuICAgIHRoaXMuc2Nyb2xsLmxpbWl0ID0gdGhpcy5ib3VuZHMud2lkdGggLSB0aGlzLmltYWdlX2VsZW1lbnRzWzBdLmVsZW1lbnQuY2xpZW50V2lkdGhcbiAgfVxuXG4gIG9uVG91Y2hEb3duKHsgeSwgeCB9KVxuICB7XG4gICAgdGhpcy5zY3JvbGwucG9zaXRpb24gPSB0aGlzLnNjcm9sbC5jdXJyZW50XG4gIH1cblxuICBvblRvdWNoTW92ZSh7IHksIHggfSlcbiAge1xuICAgIGNvbnN0IHhfZGlzdCA9IHguc3RhcnQgLSB4LmVuZFxuXG4gICAgdGhpcy5zY3JvbGwudGFyZ2V0ID0gdGhpcy5zY3JvbGwucG9zaXRpb24gLSB4X2Rpc3RcbiAgfVxuXG4gIG9uVG91Y2hVcCh7IHksIHggfSlcbiAge1xuXG4gIH1cblxuICBvbldoZWVsKHsgcGl4ZWxZLCBwaXhlbFggfSlcbiAge1xuICAgIHRoaXMuc2Nyb2xsLnRhcmdldCAtPSBwaXhlbFggKiAwLjVcbiAgfVxuXG4gIC8qXG4gICAgVXBkYXRlLlxuICAqL1xuXG4gIHVwZGF0ZSgpXG4gIHtcbiAgICB0aGlzLnNjcm9sbC50YXJnZXQgPSBnc2FwLnV0aWxzLmNsYW1wKC10aGlzLnNjcm9sbC5saW1pdCwgMCwgdGhpcy5zY3JvbGwudGFyZ2V0KVxuICAgIHRoaXMuc2Nyb2xsLmN1cnJlbnQgPSBnc2FwLnV0aWxzLmludGVycG9sYXRlKHRoaXMuc2Nyb2xsLmN1cnJlbnQsIHRoaXMuc2Nyb2xsLnRhcmdldCwgdGhpcy5zY3JvbGwuZWFzZSlcblxuICAgIHRoaXMuZ2FsbGVyeV9lbGVtZW50LnN0eWxlW3RoaXMudF9wcmVmaXhdID0gYHRyYW5zbGF0ZVgoJHt0aGlzLnNjcm9sbC5jdXJyZW50fXB4KWBcblxuICAgIG1hcCh0aGlzLmltYWdlX2VsZW1lbnRzLCBlbGVtZW50ID0+IGVsZW1lbnQudXBkYXRlKHRoaXMuc2Nyb2xsKSlcbiAgICBtYXAodGhpcy52aWRlb19lbGVtZW50cywgZWxlbWVudCA9PiBlbGVtZW50LnVwZGF0ZSh0aGlzLnNjcm9sbCkpXG5cbiAgICB0aGlzLnNjcm9sbC5sYXN0ID0gdGhpcy5zY3JvbGwuY3VycmVudFxuXG4gICAgaWYodGhpcy5zY3JvbGwuY3VycmVudCA8PSAtdGhpcy5zY3JvbGwubGltaXQgLyAyKVxuICAgIHtcbiAgICAgIGlmKHRoaXMuc2VsZWN0b3JfdmlkZW9zLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0b3JzX192aWRlb3MtLWFjdGl2ZScpKVxuICAgICAge1xuICAgICAgICB0aGlzLnNlbGVjdG9yX3ZpZGVvcy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NlbGVjdG9yc19fdmlkZW9zJylcbiAgICAgICAgdGhpcy5zZWxlY3Rvcl9waG90b3Muc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RvcnNfX3Bob3Rvcy0tYWN0aXZlJylcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgIGlmKHRoaXMuc2VsZWN0b3JfcGhvdG9zLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0b3JzX19waG90b3MtLWFjdGl2ZScpKVxuICAgICAge1xuICAgICAgICB0aGlzLnNlbGVjdG9yX3Bob3Rvcy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NlbGVjdG9yc19fcGhvdG9zJylcbiAgICAgICAgdGhpcy5zZWxlY3Rvcl92aWRlb3Muc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RvcnNfX3ZpZGVvcy0tYWN0aXZlJylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKlxuICAgIERlc3Ryb3kuXG4gICovXG5cbiAgZGVzdHJveSgpXG4gIHtcbiAgICB0aGlzLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuZ3JvdXApXG4gIH1cbn1cbiIsIl9fd2VicGFja19yZXF1aXJlX18uaCA9ICgpID0+IChcIjkzNGFkMGExYjNlYmYwOThjODI5XCIpIl0sIm5hbWVzIjpbIkdhbGxlcnkiLCJjb25zdHJ1Y3RvciIsImdsIiwic2NlbmUiLCJzY3JlZW4iLCJ2aWV3cG9ydCIsImNhbWVyYSIsInRoaXMiLCJncm91cCIsIlRyYW5zZm9ybSIsInNjcm9sbCIsImN1cnJlbnQiLCJ0YXJnZXQiLCJsYXN0Iiwic3BlZWQiLCJlYXNlIiwidF9wcmVmaXgiLCJQcmVmaXgiLCJjcmVhdGVHZW9tZXRyeSIsImdldEVsZW1lbnRzIiwiY3JlYXRlTWVudSIsImNyZWF0ZU1lbnVTZWxlY3RvciIsIm9uUmVzaXplIiwic2V0UGFyZW50Iiwic2hvdyIsImdlbyIsIlBsYW5lIiwiaGVpZ2h0U2VnbWVudHMiLCJ3aWR0aFNlZ21lbnRzIiwiZ2FsbGVyeV9lbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2FsbGVyeV93cmFwcGVyIiwic2VsZWN0b3JfdmlkZW9zIiwic2VsZWN0b3JfcGhvdG9zIiwiaW1nX2VsIiwicXVlcnlTZWxlY3RvckFsbCIsInZpZF9lbCIsImltZ19sZW5ndGgiLCJsZW5ndGgiLCJ2aWRfbGVuZ3RoIiwiaW1hZ2VfZWxlbWVudHMiLCJtYXAiLCJlbGVtZW50IiwiaW5kZXgiLCJJbWFnZUVsIiwiZ2VvbWV0cnkiLCJ2aWRlb19lbGVtZW50cyIsInNldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJnc2FwIiwibGltaXQiLCJkdXJhdGlvbiIsImhpZGUiLCJib3VuZHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImNsaWVudFdpZHRoIiwib25Ub3VjaERvd24iLCJ5IiwieCIsInBvc2l0aW9uIiwib25Ub3VjaE1vdmUiLCJ4X2Rpc3QiLCJzdGFydCIsImVuZCIsIm9uVG91Y2hVcCIsIm9uV2hlZWwiLCJwaXhlbFkiLCJwaXhlbFgiLCJ1cGRhdGUiLCJzdHlsZSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiZGVzdHJveSIsInJlbW92ZUNoaWxkIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImgiXSwic291cmNlUm9vdCI6IiJ9